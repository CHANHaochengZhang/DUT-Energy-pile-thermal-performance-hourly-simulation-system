# 能量桩热-力性能全年逐时模拟系统

## 项目简介

这是一个基于Streamlit开发的能量桩（Energy Pile）热-力性能全年逐时模拟系统，集成了热力学建模、力学分析、经济性评估和智能优化等功能，为能量桩系统的设计、优化和运行提供全面的技术支持。

## 主要功能

### 🏗️ 功能一：能量桩全年热力性能计算
- **负荷数据上传** - 支持全年8761小时建筑负荷数据
- **参数设定** - 支持螺旋管、U型管、W型管三种埋管形式
- **能效比计算** - 基于热阻网络模型的能效比计算
- **动态边界模型** - 土壤温度场年周期变化建模
- **格林函数核响应** - 热响应矩阵预计算
- **热泵模型** - XGBoost热泵COP预测模型
- **全年模拟** - 8761小时逐时热力性能计算
- **结果可视化** - 温度、位移、应力等关键指标可视化
- **经济性分析** - LCOE（平准化供能成本）计算
- **投资回收期** - 静态和动态投资回收期分析

### 🎯 功能二：能量桩参数优化
- **代理模型构建** - 基于梯度提升回归的代理模型
- **遗传算法优化** - 多目标参数优化
- **约束条件检查** - 自动验证设计约束
- **结果导出** - 多种格式的优化结果导出

### 🚀 功能三：SINDy-MPC控制策略优化
- **数据驱动建模** - 稀疏识别（SINDy）动力学建模
- **模型预测控制** - 基于识别模型的MPC控制
- **系统集成** - 太阳能-能量桩-土壤源热泵协调控制

## 技术特点

### 🔬 热力学建模
- 支持多种埋管形式（螺旋管、U型管、W型管）
- 动态边界模型考虑土壤温度年周期变化
- 格林函数方法计算热响应
- 多层温度场计算

### ⚡ 力学性能分析
- 桩顶位移计算
- 热应力分析
- 混凝土热膨胀效应建模

### 🤖 智能优化
- XGBoost热泵COP预测模型
- 梯度提升回归代理模型
- 遗传算法多目标优化
- 约束条件自动检查

### 📊 数据可视化
- 全年温度变化曲线
- 力学性能指标监控
- 经济性分析图表
- 优化过程可视化

## 安装和使用

### 环境要求
- Python 3.7+
- Streamlit
- NumPy, Pandas, Matplotlib
- XGBoost, Scikit-learn
- DEAP (遗传算法库)
- Numba (性能优化)

### 安装依赖
```bash
pip install streamlit numpy pandas matplotlib xgboost scikit-learn deap numba
```

### 运行应用
```bash
streamlit run mystreamlit.py
```

## 项目结构

```
package/
├── mystreamlit.py          # 主应用程序
├── simulation.py           # 仿真计算模块
├── results/               # 结果文件夹
│   ├── data_result.xlsx   # 模拟结果数据
│   ├── surrogate.pkl      # 代理模型
│   ├── X_samples.csv      # 采样输入数据
│   └── Y_samples.csv      # 采样输出数据
├── COP_heating.json       # 制热工况热泵模型
├── COP_colding.json       # 制冷工况热泵模型
├── 能量桩负荷数据.xlsx    # 默认负荷数据
├── *.jpg/*.png           # 系统示意图和结果图
└── README.md             # 项目说明文档
```

## 应用场景

1. **建筑能源系统设计** - 能量桩系统的初步设计和参数选择
2. **工程优化** - 在满足约束条件下优化系统参数
3. **经济性评估** - 计算投资回收期和运行成本
4. **学术研究** - 能量桩热力性能的理论研究
5. **教学演示** - 能量桩系统工作原理的可视化教学

## 技术栈

- **前端框架**: Streamlit
- **数值计算**: NumPy, SciPy
- **机器学习**: XGBoost, Scikit-learn
- **优化算法**: DEAP (遗传算法)
- **数据可视化**: Matplotlib
- **数据处理**: Pandas
- **性能优化**: Numba (JIT编译)

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目。

## 许可证

本项目采用MIT许可证。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交Issue
- 发送邮件至：[你的邮箱]

---

**注意**: 这是一个专业的工程分析工具，使用前请确保理解相关参数的含义和适用范围。
